{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///index.js","webpack:///webpack/bootstrap","webpack:///./src/index.js","webpack:///external \"@babel/runtime/helpers/interopRequireDefault\"","webpack:///external \"@babel/runtime/helpers/objectSpread\""],"names":["root","factory","exports","module","define","amd","a","i","window","modules","installedModules","__webpack_require__","moduleId","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_interopRequireDefault","default","store","localName","needSaveKeys","toString","console","warn","storage","lastDatas","forEach","v","undefined","lastLocalData","load","dispatch","type","reducer","state","toJS","data","_objectSpread2","set","k","subData","subKey","subscribe","getState","nowDatas","isNeedSave","getIn","save","theKey","arguments","length","theType","localStorage","setItem","JSON","stringify","getItem","parse","err","clear","require"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn ","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!**********************!*\\\n  !*** ./src/index.js ***!\n  \\**********************/\n/*! no static exports found */\n/*! all exports used */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ 1);\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = autoStorageSave;\nexports.storage = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/objectSpread */ 2));\n\nvar storage = {\n  localName: \"defaultIOKey\",\n  save: function save(v) {\n    var theKey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : storage.localName;\n    var theType = Object.prototype.toString.call(v);\n\n    if (theType === \"[object Object]\") {\n      localStorage.setItem(theKey, JSON.stringify(v));\n    } else if (theType === \"[object String]\") {\n      localStorage.setItem(theKey, v);\n    } else {\n      console.warn(\"Warn: storage.save() param is no a Object\");\n    }\n  },\n  load: function load() {\n    var theKey = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : storage.localName;\n\n    try {\n      var data = localStorage.getItem(theKey);\n\n      if (data) {\n        if (typeof data === \"string\") {\n          return JSON.parse(data);\n        }\n\n        return data;\n      }\n    } catch (err) {\n      console.warn(\"load last localSate error\");\n    }\n  },\n  clear: function clear() {\n    var theKey = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : storage.localName;\n    localStorage.setItem(theKey, {});\n  }\n}; // 这里做自动保存的监听\n\nexports.storage = storage;\n\nfunction autoStorageSave(store, localName, needSaveKeys) {\n  if (Object.prototype.toString.call(needSaveKeys) !== \"[object Array]\") {\n    // eslint-disable-next-line\n    console.warn(\"autoStorageSave: params is no a Array\");\n  }\n\n  storage.localName = localName || storage.localName; // 只有Auth和DataCenter的修改会激发IO, lastDats保存之前的记录\n\n  var lastDatas = {};\n  needSaveKeys.forEach(function (v) {\n    lastDatas[v] = undefined;\n  }); // 首次读取\n\n  var lastLocalData = storage.load(storage.localName);\n\n  if (Object.prototype.toString.call(lastLocalData) === \"[object Object]\") {\n    store.dispatch({\n      type: \"localStorageLoad: IO\",\n      reducer: function reducer(state) {\n        // 如果是immutable 使用toJS\n        if (state && state.toJS) {\n          var data = (0, _objectSpread2.default)({}, state.toJS(), lastLocalData);\n\n          for (var key in data) {\n            state = state.set(key, data[key]);\n          }\n\n          return state;\n        } else if (state) {\n          for (var k in state) {\n            if (state[k].toJS) {\n              var subData = (0, _objectSpread2.default)({}, state[k].toJS(), lastLocalData[k]);\n\n              for (var subKey in subData) {\n                state[k] = state[k].set(subKey, subData[subKey]);\n              }\n            }\n          }\n\n          return (0, _objectSpread2.default)({}, state);\n        } // 非immutable直接合并历史数据\n\n\n        return (0, _objectSpread2.default)({}, state, lastLocalData);\n      }\n    });\n  }\n\n  store.subscribe(function () {\n    var state = store.getState();\n\n    if (state && state.toJS) {\n      //immutable 类型\n      var nowDatas = {};\n      var isNeedSave = false;\n      needSaveKeys.forEach(function (v) {\n        // 监听数据和 Immutable 配合做低开销校验\n        if (Object.prototype.toString.call(v) === \"[object Array]\") {\n          nowDatas[v] = state.getIn(v);\n        } else {\n          nowDatas[v] = state.get(v);\n        }\n\n        if (lastDatas[v] !== nowDatas[v]) {\n          isNeedSave = true;\n        }\n\n        lastDatas[v] = nowDatas[v];\n      });\n\n      if (isNeedSave) {\n        storage.save(nowDatas);\n      }\n    } else {\n      // 非immutable做浅比较判断是否需要保存\n      var _nowDatas = {};\n      var _isNeedSave = true;\n      needSaveKeys.forEach(function (v) {\n        _nowDatas[v] = state[v];\n\n        if (lastDatas[v] !== _nowDatas[v]) {\n          _isNeedSave = true;\n        }\n\n        lastDatas[v] = _nowDatas[v];\n      });\n\n      if (_isNeedSave) {\n        storage.save(_nowDatas);\n      }\n    }\n  });\n}\n\n/***/ }),\n/* 1 */\n/*!***************************************************************!*\\\n  !*** external \"@babel/runtime/helpers/interopRequireDefault\" ***!\n  \\***************************************************************/\n/*! no static exports found */\n/*! all exports used */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\n/***/ }),\n/* 2 */\n/*!******************************************************!*\\\n  !*** external \"@babel/runtime/helpers/objectSpread\" ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! all exports used */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"@babel/runtime/helpers/objectSpread\");\n\n/***/ })\n/******/ ]);\n});"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export const storage = {\n  localName: \"defaultIOKey\",\n  save: (v, theKey = storage.localName) => {\n    const theType = Object.prototype.toString.call(v);\n    if (theType === \"[object Object]\") {\n      localStorage.setItem(theKey, JSON.stringify(v));\n    } else if (theType === \"[object String]\") {\n      localStorage.setItem(theKey, v);\n    } else {\n      console.warn(\"Warn: storage.save() param is no a Object\");\n    }\n  },\n  load: (theKey = storage.localName) => {\n    try {\n      const data = localStorage.getItem(theKey);\n      if (data) {\n        if (typeof data === \"string\") {\n          return JSON.parse(data);\n        }\n        return data;\n      }\n    } catch (err) {\n      console.warn(\"load last localSate error\");\n    }\n  },\n  clear: (theKey = storage.localName) => {\n    localStorage.setItem(theKey, {});\n  }\n};\n\n// 这里做自动保存的监听\nexport default function autoStorageSave(store, localName, needSaveKeys) {\n  if (Object.prototype.toString.call(needSaveKeys) !== \"[object Array]\") {\n    // eslint-disable-next-line\n    console.warn(\"autoStorageSave: params is no a Array\");\n  }\n  storage.localName = localName || storage.localName;\n  // 只有Auth和DataCenter的修改会激发IO, lastDats保存之前的记录\n  const lastDatas = {};\n  needSaveKeys.forEach(v => {\n    lastDatas[v] = undefined;\n  });\n  // 首次读取\n  const lastLocalData = storage.load(storage.localName);\n  if (Object.prototype.toString.call(lastLocalData) === \"[object Object]\") {\n    store.dispatch({\n      type: \"localStorageLoad: IO\",\n      reducer: state => {\n        // 如果是immutable 使用toJS\n        if (state && state.toJS) {\n          const data = {\n            ...state.toJS(),\n            ...lastLocalData\n          };\n          for (const key in data) {\n            state = state.set(key, data[key]);\n          }\n          return state;\n        } else if (state){\n          for(const k in state) {\n            if(state[k].toJS) {\n              const subData = {\n                ...state[k].toJS(),\n                ...lastLocalData[k],\n              };\n              for (const subKey in subData) {\n                state[k] = state[k].set(subKey, subData[subKey]);\n              }\n            }\n          }\n          return {...state};\n        }\n        // 非immutable直接合并历史数据\n        return {\n          ...state,\n          ...lastLocalData\n        };\n      }\n    });\n  }\n  store.subscribe(() => {\n    const state = store.getState();\n    if (state && state.toJS) {\n      //immutable 类型\n      const nowDatas = {};\n      let isNeedSave = false;\n      needSaveKeys.forEach(v => {\n        // 监听数据和 Immutable 配合做低开销校验\n        if (Object.prototype.toString.call(v) === \"[object Array]\") {\n          nowDatas[v] = state.getIn(v);\n        } else {\n          nowDatas[v] = state.get(v);\n        }\n        if (lastDatas[v] !== nowDatas[v]) {\n          isNeedSave = true;\n        }\n        lastDatas[v] = nowDatas[v];\n      });\n      if (isNeedSave) {\n        storage.save(nowDatas);\n      }\n    } else {\n      // 非immutable做浅比较判断是否需要保存\n      const nowDatas = {};\n      let isNeedSave = true;\n      needSaveKeys.forEach(v => {\n        nowDatas[v] = state[v];\n        if (lastDatas[v] !== nowDatas[v]) {\n          isNeedSave = true;\n        }\n        lastDatas[v] = nowDatas[v];\n      });\n      if (isNeedSave) {\n        storage.save(nowDatas);\n      }\n    }\n  });\n}\n","module.exports = require(\"@babel/runtime/helpers/interopRequireDefault\");","module.exports = require(\"@babel/runtime/helpers/objectSpread\");"],"sourceRoot":""}